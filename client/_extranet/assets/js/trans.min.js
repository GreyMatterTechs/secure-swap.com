"use strict";!function(n,r){if(n.ssw=n.ssw||{},void 0===n.ssw.Tools)throw new Error("Please load Tools.js");n.ssw.Trans=function(){throw new Error("Please use getInstance")},n.ssw.Trans.getInstance=function(){return e||(e=new t)};var e=null,t=function(){var e=6e4,t=e,r=null;function s(){r&&clearInterval(r),$.get("/api/ICOs/isAlive").done(function(r){t=e,r?($("#greenlight").show(),$("#redlight").hide()):($("#greenlight").hide(),$("#redlight").show())}).fail(function(r){t<100*e&&(t*=2)}),r=setInterval(s,t)}function a(r,e){return/^(0x)?[0-9a-f]{40}$/i.test(r)?/^(0x)?[0-9a-f]{40}$/.test(r)||/^(0x)?[0-9A-F]{40}$/.test(r)?e(!0):(t=r,s=function(r){return e(r)},void $.ajax({type:"POST",url:"api/ICOs/isChecksumAddress",data:{address:t},success:function(r){return r.err?s(!1):s(!0)},error:function(){return s(!1)}})):e(!1);var t,s}function o(){$("#referralbox-success-alert").hide(),$("#referralbox-error-alert").hide(),$("#referralbox-debug-alert").hide(),$("#referralbox-submit").off("click.referralsubmit").on("click.referralsubmit",function(r){if(r.preventDefault(),$("#referralbox-debug-alert").hide(),$("#referralbox-submit").text("Sending..."),t=!0,$("#referralbox-form input[type=text]").each(function(e){0==e?null==$(this).val()||""==$(this).val()?($("#referralbox-form").find("input:eq("+e+")").addClass("required-error"),t=!1):a($(this).val(),function(r){r?$("#referralbox-form").find("input:eq("+e+")").removeClass("required-error"):($("#referralbox-form").find("input:eq("+e+")").addClass("required-error"),t=!1)}):1==e&&(/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?$("#referralbox-form").find("input:eq("+e+")").removeClass("required-error"):($("#referralbox-form").find("input:eq("+e+")").addClass("required-error"),t=!1))}),t){var e=$("#referralbox-form").serialize();$.ajax({type:"POST",url:"api/ICOs/getReferrals",data:{ser:e},success:function(r){r.err?($("#referralbox-error-alert").text(r.err),$("#referralbox-error-alert").fadeIn("slow"),$("#referralbox-error-alert").delay(1e4).fadeOut("slow")):($("#referralbox-form input[type=text]").val(""),$("#referralbox-success-alert").text("Successfully sent."),$("#referralbox-success-alert").fadeIn("slow"),$("#referralbox-success-alert").delay(5e3).fadeOut("slow")),$("#referralbox-submit").text("Send")},error:function(r){$("#referralbox-error-alert").text(r.responseJSON.error.message?r.responseJSON.error.message:"0x1001"),$("#referralbox-error-alert").fadeIn("slow"),$("#referralbox-error-alert").delay(1e4).fadeOut("slow"),$("#referralbox-submit").text("Send")}})}else $("#referralbox-submit").text("Send");var t}),$("[id^=referr]").on("input change",function(r){$("[id^=referr]").removeClass("required-error")})}return{init:function(r,e,t){e||5e3,t,n.ssw.Tools.getInstance(),s(),o()}}}}(window);